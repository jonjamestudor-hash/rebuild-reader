var id,self=this;function parse(e){e||(e={});var r=e.html,n=e.WEBVIEW_SERVER_URL,t=e.mobile,a=e.native,i=[],s=[];i.push(/([< \/][^>]*?>)((\s*[^<\s]+\s+?)+)([^<\s]+\s*)(<)/g),s.push(/(>)([^<\n]*?[^<]+?)(<[^\/])/g),s.push(/(<\/[^>]*?>)([^<]*?)(<\/)/g);for(var f=0;f<i.length;f++){var l=i[f];r=r.replace(l,(function(e,r){if(arguments[1].match(/<[^>]*?class="[^"]*?parsed.*?>/g))return e;if(0==arguments[1].indexOf("<pre"))return e;if(0==arguments[1].indexOf("<code"))return e;if(0==arguments[1].indexOf("<script"))return e;var n="",t=arguments[2].split(" ");""==t[t.length-1]&&t.splice(-1,1),t.push(arguments[4]);for(var a=0;a<t.length;a++){var i=a==t.length-1?"":" ";n+="<span>"+t[a]+i+"</span>"}return arguments[1]+n+"<"}))}for(f=0;f<s.length;f++)r=r.replace(s[f],(function(e,r){return arguments[2].trim()?arguments[1]+("<span>"+arguments[2]+"</span>")+arguments[3]:e}));r=r.replace(/(<a [\s\S]*?)(>)/g,'$1 onclick="return false;" $2'),a&&t&&(r=r.replace(/(<img[^>]*src=)"(.*?)"/g,(function(e,r){var t=arguments[2];try{t=function(e){if(!e)return e;if(0===e.indexOf("/"))return n+"/_app_file_"+e;if(0===e.indexOf("file://"))return n+e.replace("file://","/_app_file_");if(0===e.indexOf("content://"))return n+e.replace("content:/","/_app_content_");return e}(t)}catch(e){}return arguments[1]+'"'+t+'"'}))),self.postMessage({data:r,id:id})}self.addEventListener("message",(function(e){var r=e.data.func,n=e.data.params;id=e.data.id,self[r].apply(self,n)}),!1);var log=console.log;function clone(e){if(null==e||"object"!=typeof e)return e;var r=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(r[n]=clone(e[n]));return r}